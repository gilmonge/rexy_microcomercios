{% extends 'coreAdmin/base.html' %}
{% load static %}
{% block title %}Mis Comercios{% endblock %}

{% block customHead %}
        <link href="{% static 'admin/assets/dataTables/css/dataTables.bootstrap4.css' %}" rel="stylesheet"  type="text/css"/>
{% endblock %}

{% block customCss %}
    <style>
        tbody tr td{ color: #ffffff; }
        tbody tr td a{ color: #5C9FF1; padding-left: 10px; }
    </style>
{% endblock %}

{% block content %}
                    <div class="panel-header bg-primary-gradient">
                        <div class="page-inner py-5">
                            <div class="d-flex align-items-left align-items-md-center flex-column flex-md-row">
                                <div>
                                    <h2 class="text-white pb-2 fw-bold">Editar comercio</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="page-inner mt--5">
                        <div class="row mt--2">

                            <div class="col-md-12 row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-body">
                                            <form action="" method="post" enctype="multipart/form-data">
                                                {% csrf_token %}

                                                <div class="form-group">
                                                    {{ form.nombre.label_tag }}
                                                    {{ form.nombre }}
                                                    {{ form.nombre.errors }}
                                                </div>

                                                <div class="form-group">
                                                    {{ form.slug.label_tag }}
                                                    {{ form.slug }}
                                                    {{ form.slug.errors }}
                                                </div>

                                                <div class="form-group">
                                                    {{ form.eslogan.label_tag }}
                                                    {{ form.eslogan }}
                                                    {{ form.eslogan.errors }}
                                                </div>

                                                <div class="form-group">
                                                    {{ form.descripcion.label_tag }}
                                                    {{ form.descripcion }}
                                                    {{ form.descripcion.errors }}
                                                </div>

                                                <div class="form-group">
                                                    {{ form.redessociales.label_tag }}
                                                    {{ form.redessociales }}
                                                    {{ form.redessociales.errors }}
                                                </div>

                                                <div class="form-group">
                                                    {{ form.contacto.label_tag }}
                                                    {{ form.contacto }}
                                                    {{ form.contacto.errors }}
                                                </div>

                                                <div class="form-group">
                                                    {{ form.img_superior.label_tag }}
                                                    {{ form.img_superior }}
                                                    {{ form.img_superior.errors }}
                                                </div>

                                                <div class="form-group">
                                                    {{ form.img_acercade.label_tag }}
                                                    {{ form.img_acercade }}
                                                    {{ form.img_acercade.errors }}
                                                </div>

                                                    
                                                <div class="text-center">
                                                    <input type="submit" class="btn btn-success btn-block" value="Actualizar comercio" />
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            
                                <div class="col-md-12">
                                    <a href="{% url 'coreAdmin:comercios'  %}" type="button" class="btn btn-light"><i class="fas fa-chevron-left"></i> Volver al listado</a>
                                </div>
                            </div>
                        </div>
                    </div>
{% endblock %}

{% block customJs %}
        <script src="{% static 'admin/assets/dataTables/js/jquery.dataTables.js' %}"></script>
        <script src="{% static 'admin/assets/dataTables/js/dataTables.bootstrap4.js' %}"></script>
        <script>
            $(document).ready(function () {
                $('#dataTable').dataTable( {
                    "language": {
                        "lengthMenu"    : "Mostrando  _MENU_ ",
                        "zeroRecords"   : "Nada que mostrar - disculpe!",
                        "info"          : "Mostrando la página _PAGE_ de _PAGES_",
                        "infoEmpty"     : "No se encontrarán registros",
                        "infoFiltered"  : "(Filtrando _MAX_ del total de registros)",
                        "search"        : "Buscar ",
                        "paginate": {
                            "previous"  : " Anterior ",
                            "next"      : " Siguiente "
                        }
                    },
                    "paging"            : true,
                    "ordering"          : true,
                    "order"             : [[0, 'desc']],
                    "info"              : true,
                    "fixedHeader"       : true
                });
            });

            {% if 'ok' in request.GET %}
                $("#msgInfo").html(`
                    <p style="color: #212529; font-size: 1.4rem;">Se ha actualizado el comercio correctamente</p>
                `)
                $("#Modal_informacion").modal("show")
            {% endif %}
        </script>
{% endblock %}